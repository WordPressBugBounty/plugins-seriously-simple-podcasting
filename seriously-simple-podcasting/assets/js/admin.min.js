jQuery(document).ready(function(s){var n,i;function o(e){e.filesizeInBytes&&(s("#filesize_raw").val(e.filesizeInBytes.toString()).trigger("change"),(a=function(e,t){if(t=t||2,!e)return!1;var a=Math.log(e)/Math.log(1024),e=Math.pow(1024,a-Math.floor(a));return Math.round(e*Math.pow(10,t))/Math.pow(10,t)+["","k","M","G","T"][Math.floor(a)]}(e.filesizeInBytes))&&s("#filesize").val(a).trigger("change")),!e.fileLength||(t=function(e){if(!e||"string"!=typeof e)return"";var t=e.split(":");if(2!==t.length)return e;var a=parseInt(t[0],10),e=parseInt(t[1],10);return"00:"+(t=function(e){return e.toString().padStart(2,"0")})(a)+":"+t(e)}(e.fileLength))&&s("#duration").val(t).trigger("change");var t,a=s("#date_recorded");a.length&&(e=(t=e.date?new Date(e.date):new Date).getFullYear()+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0"),a.val(e).trigger("change"),(e=s("#date_recorded_display")).length&&(t=t.toLocaleDateString(void 0,{day:"numeric",month:"long",year:"numeric"}),e.val(t)))}s.fn.ssp_upload_media_file=function(e,t=null){var a=e.data("field"),i=e.data("preview");(n=wp.media.frames.file_frame=wp.media({title:s(this).data("uploader_title"),button:{text:s(this).data("uploader_button_text")},multiple:!1})).on("select",function(){var e=n.state().get("selection").first().toJSON();"function"==typeof t&&!t(e)||(s("input."+a).val(e.url).trigger("change"),i&&s("."+i).attr("src",e.url),"ssp-field-audio_file"===a&&o(e))}),n.open()},s("#series_upload_image_button").on("click",function(e){e.preventDefault();wp.media.editor.send.attachment;var e=s(this).attr("id"),t=e.replace("_upload","").replace("_button","_preview"),a=e.replace("_upload","").replace("_button","_id");i||(i=wp.media({title:s(this).data("uploader_title"),button:{text:s(this).data("uploader_button_text")},library:{type:["image"]},multiple:!1})).on("select",function(){var e=i.state().get("selection").first().toJSON();s("#"+t).attr("src",e.url),s("#"+a).val(e.id)}),i.open()}),s("#series_remove_image_button").on("click",function(e){e.preventDefault();var t=s(this).attr("id"),a=t.replace("_remove","").replace("_button","_preview"),e=t.replace("_remove","").replace("_button","_id");confirm("Are you sure?")&&(t=s("#"+a).attr("data-src"),s("#"+a).attr("src",t),s("#"+e).val(""))}),s("body").on("click",".ssp-upload-file",function(e){e.preventDefault(),s.fn.ssp_upload_media_file(s(this))}),s("#episode_embed_code").on("click",function(){s(this).select()}),s(".episode_embed_code_size_option").on("change",function(){var e=s("#episode_embed_code_width").val(),t=s("#episode_embed_code_height").val(),a=s("#post_ID").val();s.post(ajaxurl,{action:"update_episode_embed_code",width:e,height:t,post_id:a},function(e){e&&(s("#episode_embed_code").val(e),s("#episode_embed_code").select())})}),s(".ssp-datepicker").datepicker({changeMonth:!0,changeYear:!0,showAnim:"slideDown",dateFormat:"d MM, yy",altField:"#date_recorded",altFormat:"yy-mm-dd",onClose:function(e,t){var a=s.datepicker.parseDate("d MM, yy",e),e=s.datepicker.formatDate("yy-mm-dd",a),a=s(this).attr("id").replace("_display","");s("#"+a).val(e).trigger("change")}}),s(".ssp-datepicker").change(function(){var e;s(this).val()||(e=s(this).attr("id").replace("_display",""),s("#"+e).val(""))}),s("#feed-series-toggle").on("click",function(e){s(this).hasClass("series-open")?(s("#feed-series-list").slideUp("fast"),s(this).removeClass("series-open"),s(this).addClass("series-closed")):s(this).hasClass("series-closed")&&(s("#feed-series-list").slideDown("fast"),s(this).removeClass("series-closed"),s(this).addClass("series-open"))}),s("#ss_podcasting_data_image_delete").on("click",function(){return s("#ss_podcasting_data_image").val(""),s("#ss_podcasting_data_image_preview").attr("src",""),!1}),s("#cover_image_button, #ss_podcasting_data_image_button").on("click",function(e){var t="cover_image"===s(e.target).data("validator")?function(e){return e.width===e.height&&300<=e.width}:function(e){return 1400<=e.width&&e.width<=3e3&&e.height===e.width},a=s(this).parent().find(".description"),i="cover_image_button"===s(e.target).prop("id")?s("#cover_image_id"):s("#ss_podcasting_data_image_preview");s.fn.ssp_upload_media_file(s(this),t),a.css("color",""),n.on("select",function(){var e=n.state().get("selection").first().toJSON();t(e)?i.val(e.id):a.css("color","red")})}),s(".ssp-image-delete").on("click",function(){s("."+s(this).data("field")).val("").trigger("change"),s("."+s(this).data("preview")).attr("src","").trigger("change")}),s(".js-ssp-select2").select2();var a,e,r,t,c;(c=s(".ssp-dynamo")).length&&(e=(a=c.find("a")).attr("href"),r=new URL(e),t=function(e,t){r.searchParams.set(e,t),r.search=r.searchParams.toString(),a.attr("href",r.toString())},s(document).on("keyup",".wp-block-post-title",function(e){e=s(e.target).text();e&&t("t",e)}),s(document).on("change",".editor-post-taxonomies__hierarchical-terms-list",function(e){e=s(e.target).closest(".editor-post-taxonomies__hierarchical-terms-list");"Podcasts"===e.attr("aria-label")&&(e=(e=e.find("input:checked").first().closest("div").find("label").text())||c.data("default-podcast-title"),t("s",e.replace(" (default)","")))})),s(".notice.is-constant").on("click",".notice-dismiss",function(){var e=s(this).closest(".notice"),e={action:"remove_constant_notice",id:e.data("id"),nonce:e.data("nonce")};s.post(ajaxurl,e)}),s(".js-open-ssp-controls").on("click",function(){s(".ssp-open").trigger("click")}),s(".ssp-sync").on("change",function(){var e=s(this).val(),e="checkbox"!==s(this).attr("type")||s(this).is(":checked")?e:"";document.dispatchEvent(new CustomEvent("changedSSPField",{detail:{field:s(this).prop("name"),value:e}}))}),document.addEventListener("changedSSPGutField",function(e){e=e.detail;s('input.ssp-sync[type="text"][name="'+e.field+'"]').val(e.value),s('input.ssp-sync[type="number"][name="'+e.field+'"]').val(e.value),s('input.ssp-sync[type="hidden"][name="'+e.field+'"]').val(e.value),s('input.ssp-sync[type="radio"][name="'+e.field+'"][value="'+e.value+'"]').prop("checked",!0),s('select.ssp-sync[name="'+e.field+'"] option[value="'+e.value+'"]').prop("selected",!0),s('input.ssp-sync[type="checkbox"][name="'+e.field+'"]').prop("checked","on"===e.value),s("img.ssp-sync.ssp-preview-"+e.field).prop("src",e.value)})});